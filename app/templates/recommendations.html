<!DOCTYPE html>
<html>
<head>
    <title>be cool</title>

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <link href="http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <link href="../static/bootstrap/css/star-rating.min.css" media="all" rel="stylesheet" type="text/css"/>
    <script src="../static/bootstrap/js/star-rating.min.js" type="text/javascript"></script>
    <script src="../static/js/searchgazer.js" type="text/javascript"></script>

<body background="http://fmn.rrfmn.com/fmn078/20160423/2015/large_5kqd_4c92000609851e7f.jpg">

<br><br><br>
<div class="container">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">
                <b>根据您的打分，以下是我们为您推荐的商品列表(顺序与推荐程度无关)</b><br>
                请您根据自己<b>满意程度</b>，对<b>每个列表</b>进行打分
            </h3>
        </div>
    </div>
</div>

<form name="reg" action="/list diversity" method="post">
    <input name="student_id" type="hidden" value={{ student_id }}>
    <div class="container">
        {% for tmplist in match %}
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title"><b>推荐列表{{ tmplist.list_id }}</b></h3>
                </div>
                <div class="panel-body">
                    {% for each in tmplist.list %}
                        <div class="col-xs-2" id="{{ each.itemID }}">
                            <div class="thumbnail" data-toggle="tooltip" data-placement="top" title="{{ each.name }}">
                                <a href="{{ each.itemUrl }}" target="_blank"><img src="{{ each.imgUrl }}"></a>
                                <div class="caption">
                                    <p style="overflow: hidden;white-space: nowrap;text-overflow: ellipsis;">{{ each.name }}</p>
                                    <h5>{{ each.sim_value }}</h5>
                                </div>
                            </div>
                        </div>
                    {% endfor %}

                    <table class="table table-bordered">
                        <tbody>
                        <tr>
                            <th style="vertical-align: middle">
                                <font size="4">您对这个推荐是否满意？请根据您的满意程度进行评分</font>
                            </th>
                            <th style="vertical-align: middle">
                                <input name={{ tmplist.rec_method }} id=rec_list{{ tmplist.list_id }} type="number"
                                       class="rating" min=0 max=5 step=1 data-size="sm" value="0">
                            </th>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        {% endfor %}
        <div style="margin:auto;width:200px">
            <p><input class="btn btn-primary" type="button" onclick="check()" style="width:200px" value="下一步"></p>
        </div>
        <br><br><br>
    </div>
</form>

<style>
    .right {
        float: right;
        text-align: right;
    }

    .col-center-block {
        float: none;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }
</style>
<script>
    $(function () {
        $("[data-toggle='tooltip']").tooltip();
    });
    function check() {
        if (document.getElementById('rec_list1').value == 0) {
            alert("请对推荐列表1的满意度进行打分");
        }
        else if (document.getElementById('rec_list2').value == 0) {
            alert("请对推荐列表2的满意度进行打分");
        }
        else if (document.getElementById('rec_list3').value == 0) {
            alert("请对推荐列表3的满意度进行打分");
        }
        else if (document.getElementById('rec_list4').value == 0) {
            alert("请对推荐列表4的满意度进行打分");
        }
        else if (document.getElementById('rec_list5').value == 0) {
            alert("请对推荐列表5的满意度进行打分");
        }
        else if (document.getElementById('rec_list6').value == 0) {
            alert("请对推荐列表6的满意度进行打分");
        }
        else if (document.getElementById('rec_list7').value == 0) {
            alert("请对推荐列表7的满意度进行打分");
        }
        else reg.submit()
    }
</script>

<script>
    var collect = false;
    window.onload = function () {
        webgazer.setRegression('ridge') /* currently must set regression and tracker */
                .setTracker('clmtrackr')
                .setGazeListener(function (data, clock) {
//					if (data && collect) {
//						gazepoints.push({"x": data.x, "y": data.y, "time": clock});
//						if (gazepoints.length == 3000) {
//							var containPos = getpos(document.getElementById("items"));
//
//							post2background("heatmap", {
//								"gaze": JSON.stringify(gazepoints),
//								'window_x': containPos.x,
//								'window_y': containPos.y
//							})
//						}
//					}
                })
                .begin()
                .showPredictionPoints(true);

        var width = 320;
        var height = 240;
        var topDist = '0px';
        var leftDist = '0px';

        var setup = function () {
            var video = document.getElementById('webgazerVideoFeed');
            video.style.display = 'hidden';
            video.style.position = 'absolute';
            video.style.top = topDist;
            video.style.left = leftDist;
            video.width = width;
            video.height = height;
            video.style.margin = '0px';

            webgazer.params.imgWidth = width;
            webgazer.params.imgHeight = height;
        };

        function checkIfReady() {
            if (webgazer.isReady()) {
                setup();
            } else {
                setTimeout(checkIfReady, 100);
            }
        }

        setTimeout(checkIfReady, 100);
    };
    window.onbeforeunload = function () {
        webgazer.end();
    };
</script>
</body>
</html>
		
